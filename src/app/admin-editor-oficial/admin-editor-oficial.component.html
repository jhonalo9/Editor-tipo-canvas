<!-- admin-template-designer.component.html -->
<div class="template-designer">
  <div class="designer-header">
    <h2>ğŸ¨ DiseÃ±ador de Plantillas</h2>
    <p>Crea plantillas de diseÃ±o que los usuarios puedan aplicar a sus lÃ­neas de tiempo</p>
    <button class="btn btn-primary" (click)="createTemplate()">
      ğŸ¨ Nueva Plantilla de DiseÃ±o
    </button>
  </div>

  <div class="templates-grid">
    <div *ngFor="let template of templates; trackBy: trackByTemplateId" class="template-card">
      <div class="template-preview" [style.background]="template.styles.backgroundColor">
        <div class="preview-timeline" [style.background]="template.styles.timelineColor"></div>
        <div class="preview-events">
          <div class="preview-event" [style.background]="template.styles.eventColor"></div>
          <div class="preview-event" [style.background]="template.styles.eventColor"></div>
          <div class="preview-event" [style.background]="template.styles.eventColor"></div>
        </div>
      </div>
      
      <div class="template-info">
        <h3 [style.color]="template.styles.textColor">{{template.name}}</h3>
        <p>{{template.description}}</p>
        <div class="template-meta">
          <span>{{template.category}}</span>
          <span>{{template.isPublic ? 'ğŸŒ PÃºblica' : 'ğŸ”’ Privada'}}</span>
        </div>
        
        <div class="template-actions">
          <button class="btn btn-sm btn-primary" (click)="editTemplate(template)">
            âœï¸ Editar DiseÃ±o
          </button>
          <button class="btn btn-sm btn-danger" (click)="deleteTemplate(template)">
            ğŸ—‘ï¸ Eliminar
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Modal de diseÃ±o -->
  <div *ngIf="showTemplateModal" class="modal-overlay" (click)="closeTemplateModal()">
    <div class="modal-content design-modal" (click)="$event.stopPropagation()">
      <h3>{{editingTemplate ? 'âœï¸ Editar' : 'ğŸ¨ Crear'}} Plantilla de DiseÃ±o</h3>
      
      <div class="design-container">
        <!-- Panel de configuraciÃ³n -->
        <div class="config-panel">
          <div class="form-section">
            <h4>ğŸ“ InformaciÃ³n BÃ¡sica</h4>
            
            <div class="form-group">
              <label>Nombre de la plantilla:</label>
              <input type="text" [(ngModel)]="newTemplate.name" 
                     (input)="onStyleChange()"
                     placeholder="Ej: Moderno Minimalista">
            </div>

            <div class="form-group">
              <label>DescripciÃ³n:</label>
              <textarea [(ngModel)]="newTemplate.description" 
                        placeholder="Describe el estilo de diseÃ±o..."></textarea>
            </div>

            <div class="form-group">
              <label>CategorÃ­a:</label>
              <input type="text" [(ngModel)]="newTemplate.category" 
                     placeholder="Ej: Profesional, Moderno, ClÃ¡sico">
            </div>
          </div>

          <div class="form-section">
            <h4>ğŸ¨ Colores</h4>
            
            <div class="color-grid">
              <div class="color-input">
                <label>Fondo:</label>
                <input type="color" [(ngModel)]="newTemplate.styles.backgroundColor" 
                       (change)="onStyleChange()">
              </div>
              <div class="color-input">
                <label>LÃ­nea de tiempo:</label>
                <input type="color" [(ngModel)]="newTemplate.styles.timelineColor" 
                       (change)="onStyleChange()">
              </div>
              <div class="color-input">
                <label>Eventos:</label>
                <input type="color" [(ngModel)]="newTemplate.styles.eventColor" 
                       (change)="onStyleChange()">
              </div>
              <div class="color-input">
                <label>Texto:</label>
                <input type="color" [(ngModel)]="newTemplate.styles.textColor" 
                       (change)="onStyleChange()">
              </div>
            </div>
          </div>

          <div class="form-section">
            <h4>ğŸ”¤ TipografÃ­a</h4>
            
            <div class="form-group">
              <label>Fuente:</label>
              <select [(ngModel)]="newTemplate.styles.fontFamily" 
                      (change)="onStyleChange()">
                <option *ngFor="let font of fontFamilies" [value]="font">
                  {{font.split(',')[0]}}
                </option>
              </select>
            </div>

            <div class="form-group">
              <label>TamaÃ±o tÃ­tulo:</label>
              <input type="range" min="10" max="20" 
                     [(ngModel)]="newTemplate.styles.titleFontSize"
                     (input)="onStyleChange()">
              <span>{{newTemplate.styles.titleFontSize}}px</span>
            </div>
          </div>

          <div class="form-section">
            <h4>ğŸ“ DiseÃ±o</h4>
            
            <div class="form-group">
              <label>PosiciÃ³n lÃ­nea:</label>
              <select [(ngModel)]="newTemplate.layout.timelinePosition">
                <option *ngFor="let pos of timelinePositions" [value]="pos">
                  {{pos === 'top' ? 'Superior' : pos === 'center' ? 'Centro' : 'Inferior'}}
                </option>
              </select>
            </div>

            <div class="form-group">
              <label>OrientaciÃ³n eventos:</label>
              <select [(ngModel)]="newTemplate.layout.eventOrientation">
                <option *ngFor="let orient of eventOrientations" [value]="orient">
                  {{orient === 'alternate' ? 'Alternada' : orient === 'above' ? 'Arriba' : 'Abajo'}}
                </option>
              </select>
            </div>
          </div>
        </div>

        <!-- Preview en tiempo real -->
        <div class="preview-panel">
          <h4>ğŸ‘ï¸ Vista Previa</h4>
          <div class="live-preview" [ngStyle]="previewStyles">
            <div class="preview-timeline-full" 
                 [style.background]="newTemplate.styles.timelineColor"></div>
            <div class="preview-events-full">
              <div class="preview-event-full" 
                   [style.background]="newTemplate.styles.eventColor">
                <span class="event-year">2020</span>
                <span class="event-title">Evento de ejemplo</span>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="modal-actions">
        <button class="btn btn-secondary" (click)="closeTemplateModal()">
          âŒ Cancelar
        </button>
        <button class="btn btn-primary" (click)="saveTemplate()"
                [disabled]="!newTemplate.name.trim()">
          ğŸ’¾ {{editingTemplate ? 'Actualizar' : 'Crear'}} DiseÃ±o
        </button>
      </div>
    </div>
  </div>
</div>
<div class="home-container">
  <!-- Hero Section -->
  <app-header></app-header>
  
  <section class="hero-section">
    <div class="hero-content">
      <h1>Crea Líneas de Tiempo Impresionantes</h1>
      <p>Diseña visualizaciones temporales interactivas para proyectos, historias y planificaciones</p>
      <div class="hero-actions">
        <button class="btn-primary btn-large" (click)="crearProyecto()">
          {{ isLoggedIn ? 'Crear Proyecto' : 'Comenzar Ahora' }}
        </button>
      </div>
    </div>
  </section>

  <!-- Plantillas Section -->
  <section class="templates-section">
    <div class="section-header">
      <h2>Plantillas Destacadas</h2>
      <p>Comienza con una de nuestras plantillas prediseñadas</p>
    </div>

    <div *ngIf="isLoading" class="loading-spinner">
      <div class="spinner"></div>
      <p>Cargando plantillas...</p>
    </div>

    <div *ngIf="!isLoading && plantillas.length === 0" class="empty-state">
      <i class="fas fa-inbox"></i>
      <h3>No hay plantillas disponibles</h3>
      <p>Pronto agregaremos nuevas plantillas para que uses</p>
    </div>

    <div class="templates-grid" *ngIf="!isLoading && plantillas.length > 0">
  <div 
    class="template-card" 
    *ngFor="let plantilla of plantillas"
    [style.border-left-color]="getPlantillaColor(plantilla)"
  >
    <div class="template-preview">
      <img 
        [src]="getPlantillaImage(plantilla)" 
        [alt]="plantilla.nombre"
        (error)="onImageError($event, plantilla)"
        class="template-image"
      >

      <!-- Overlay con botones -->
      <div class="template-overlay">
        <!--<h3>{{ plantilla.nombre }}</h3>-->
        <div class="overlay-buttons">
          <button class="btn-hover" (click)="usarPlantilla(plantilla)">Usar</button>
          <button class="btn-view" (click)="abrirModal(plantilla, $event)">Visualizar</button>
        </div>
      </div>


      <!-- ⭐ Ícono de Favorito -->
    <div 
  class="favorite-icon" 
  (click)="toggleFavorito(plantilla, $event)"
  title="Agregar a favoritos"
>
  <i [ngClass]="plantilla.favorito ? 'bi bi-star-fill' : 'bi bi-star'"></i>
</div>
    </div>
  </div>
</div>
<div class="explore">
    <button class="btn-primary" routerLink="/plantillas">Explorar +</button>
  </div>
  </section>

  

  <!-- Features Section -->
  <section class="features-section">
    <div class="section-header">
      <h2>¿Por qué elegirnos?</h2>
    </div>
    <div class="features-grid">
      <div class="feature-card">
        <i class="fas fa-paint-brush"></i>
        <h3>Diseño Intuitivo</h3>
        <p>Interfaz fácil de usar con herramientas drag-and-drop</p>
      </div>
      <div class="feature-card">
        <i class="fas fa-share-alt"></i>
        <h3>Comparte Fácilmente</h3>
        <p>Exporta y comparte tus líneas de tiempo en múltiples formatos</p>
      </div>
      <div class="feature-card">
        <i class="fas fa-users"></i>
        <h3>Colaboración</h3>
        <p>Trabaja en equipo en tiempo real en tus proyectos</p>
      </div>
    </div>
  </section>
</div>


<!-- MODAL DE VISTA PREVIA -->
<!-- MODAL DE VISTA PREVIA -->
<div class="modal-backdrop" *ngIf="modalVisible" (click)="cerrarModal()">
  <div class="modal-content" (click)="$event.stopPropagation()">
    <button class="modal-close" (click)="cerrarModal()">&times;</button>

    <img [src]="getPlantillaImage(plantillaSeleccionada)" [alt]="plantillaSeleccionada?.nombre" class="modal-image">

    <div class="modal-info">
      <h2>{{ plantillaSeleccionada?.nombre }}</h2>
      <p>{{ plantillaSeleccionada?.descripcion || 'Sin descripción disponible' }}</p>

      <div class="modal-actions">
        <button class="btn-primary" (click)="usarPlantilla(plantillaSeleccionada)">
          Usar Plantilla
        </button>
        
        <!-- ✅ Botón de Favorito en el modal -->
        <button 
          class="btn-favorite-icon"
          [class.favorito-activo]="plantillaSeleccionada?.favorito"
          (click)="toggleFavoritoModal(plantillaSeleccionada, $event)"
          [title]="plantillaSeleccionada?.favorito ? 'Quitar de Favoritos' : 'Agregar a Favoritos'"
        >
          <i [ngClass]="plantillaSeleccionada?.favorito ? 'bi bi-star-fill' : 'bi bi-star'"></i>
        </button>
      </div>
    </div>
  </div>
</div>